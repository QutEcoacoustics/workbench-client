<div>
  <label *ngIf="label" for="typeahead-input" class="form-label">
    {{ label }}
  </label>
  <div
    class="typeahead-input-container d-flex form-group form-control border p-0"
  >
    <ng-container *ngIf="multipleInputs">
      <span
        *ngFor="let item of activeItems"
        class="item-pill badge fw-normal mx-1 my-1"
        (keydown.backspace)="removeItem(item)"
        (keydown.delete)="removeItem(item)"
        tabindex="0"
      >
        <fa-icon
          (click)="removeItem(item)"
          class="btn-sm me-1"
          [icon]="['fas', 'square-xmark']"
        ></fa-icon>

        <ng-container *ngIf="!resultTemplate; else customTemplate">
          <!-- default results template -->
          {{ item }}
        </ng-container>

        <ng-template #customTemplate>
          <ng-container #customTemplate *ngTemplateOutlet="resultTemplate; context: { result: item }"></ng-container>
        </ng-template>
      </span>
    </ng-container>

    <input
      #typeaheadInputRef
      id="typeahead-input"
      name="typeahead-input"
      type="text"
      class="form-control border-0"
      [placeholder]="activeItems.length < 1 ? inputPlaceholder : ''"
      [ngbTypeahead]="findOptions"
      [resultTemplate]="resultTemplate"
      [(ngModel)]="inputModel"
      (selectItem)="onItemSelected($event)"
      (keydown.backspace)="removeLastItem()"
      [disabled]="inputDisabled"
    />
  </div>
</div>
