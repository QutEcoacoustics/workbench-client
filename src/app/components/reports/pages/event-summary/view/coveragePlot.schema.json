{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "datasets": {},
  "data": {
    "name": "recordingCoverage"
  },
  "transform": [
    {
      "lookup": "startDate",
      "from": {
        "data": {
          "name": "analysisCoverage"
        },
        "key": "startDate",
        "fields": [
          "startDate",
          "endDate"
        ]
      },
      "as": [
        "analysis.startDate",
        "analysis.endDate"
      ]
    }
  ],
  "resolve": {
    "scale": {
      "x": "shared"
    }
  },
  "vconcat": [
    {
      "title": {
        "text": "Audio Recording Coverage",
        "anchor": "start",
        "fontSize": 16,
        "fontWeight": "normal"
      },
      "width": "container",
      "height": 50,
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "startDate",
          "type": "temporal",
          "axis": {
            "title": null,
            "labels": false,
            "ticks": false,
            "grid": true,
            "domain": false
          }
        },
        "x2": {
          "field": "endDate"
        },
        "color": {
          "value": "var(--baw-primary)"
        },
        "tooltip": [
          {
            "type": "temporal",
            "field": "startDate",
            "title": "Recording Start Date",
            "timeUnit": "yearmonthdate"
          },
          {
            "type": "temporal",
            "field": "endDate",
            "title": "Recording End Date",
            "timeUnit": "yearmonthdate"
          }
        ]
      }
    },
    {
      "title": {
        "text": "Analysis Coverage",
        "anchor": "start",
        "fontSize": 16,
        "fontWeight": "normal"
      },
      "width": "container",
      "height": 50,
      "layer": [
        {
          "mark": "bar",
          "encoding": {
            "x": {
              "field": "startDate",
              "type": "temporal",
              "axis": {
                "labelAngle": 45,
                "labelFontSize": 12,
                "title": null,
                "grid": true,
                "tickCount": {
                  "interval": "month"
                },
                "format": "%b %Y"
              },
              "scale": {
                "padding": 0,
                "paddingInner": 1
              }
            },
            "x2": {
              "field": "endDate"
            },
            "color": {
              "value": "var(--baw-warning)"
            }
          }
        },
        {
          "mark": "bar",
          "encoding": {
            "x": {
              "field": "analysis.startDate",
              "type": "temporal"
            },
            "x2": {
              "field": "analysis.endDate"
            },
            "color": {
              "value": "var(--baw-success)"
            },
            "tooltip": [
              {
                "field": "analysis.startDate",
                "title": "Analysis Start Date"
              },
              {
                "field": "analysis.endDate",
                "title": "Analysis End Date"
              }
            ]
          }
        }
      ]
    }
  ]
}
