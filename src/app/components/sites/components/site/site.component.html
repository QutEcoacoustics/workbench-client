<!-- Site Details -->
<h2 class="text-muted">Project: {{ project.name }}</h2>
<h3 *ngIf="region" class="text-muted">Site: {{ region.name }}</h3>
<h1>{{ site.name }}</h1>

<div class="row mb-3">
  <div class="col-sm-4">
    <img
      class="img-thumbnail mx-auto d-block"
      [src]="site.imageUrls"
      [alt]="site.name + ' image'"
    />
  </div>
  <div class="col-sm-8">
    <p
      id="site_description"
      [innerHtml]="site.descriptionHtml || defaultDescription"
    ></p>
  </div>
</div>

<!-- Audio Recording Summary -->
<h2>Audio Recordings</h2>

<!-- Split details and maps into 50/50 columns-->
<div class="row">
  <!-- Details in left column -->
  <div class="col-sm-6">
    <!-- Loading animation -->
    <baw-loading
      *ngIf="recordings === undefined"
      id="recordings-loader"
    ></baw-loading>

    <!-- Handle recordings error -->
    <p *ngIf="recordings === null" id="recordings-error-description">
      Unable to load site recordings.
    </p>

    <!-- Handle no recordings -->
    <p *ngIf="recordings?.length === 0" id="recordings-placeholder-description">
      This site does not contain any audio recordings.
    </p>

    <!-- Handle recordings-->
    <ng-container *ngIf="recordings?.length > 0">
      <!-- Description -->
      <p id="recording-dates">
        This site contains recordings from
        {{ humanizeDate(oldestRecording) }} to
        {{ humanizeDate(newestRecording) }}.
      </p>

      <!-- TODO Statistics about recordings -->
      <baw-wip>
        <p>
          This site covers 4 days, 23 hours, 20 minutes, and 51 seconds and
          there are recordings for 4.0 days, 23.0 hours, 16.0 minutes, and 35
          seconds of that time.
        </p>
      </baw-wip>

      <ul class="nav mb-0">
        <!-- Play link (if recordings exist) -->
        <li class="nav-item">
          <a
            *ngIf="oldestRecording"
            class="nav-link rounded-link-default"
            [bawUrl]="oldestRecording?.viewUrl"
          >
            <fa-icon [icon]="['fas', 'play-circle']"></fa-icon>
            Play
          </a>
          <!-- Loading while retrieving recording -->
          <baw-loading
            *ngIf="oldestRecording === undefined"
            id="play-loader"
            size="sm"
          ></baw-loading>
        </li>

        <!-- Visualize link -->
        <li class="nav-item">
          <a class="nav-link rounded-link-default" [bawUrl]="site.visualizeUrl">
            <fa-icon [icon]="['fas', 'eye']"></fa-icon>
            Visualise
          </a>
        </li>

        <!-- Audio recordings link (if recordings exist) -->
        <li *ngIf="oldestRecording" class="nav-item">
          <a
            class="nav-link rounded-link-default"
            [bawUrl]="site.getAudioRecordingsUrl(project)"
          >
            <fa-icon [icon]="['fas', 'file-audio']"></fa-icon>
            Audio Recordings
          </a>
        </li>
      </ul>

      <!-- Recent Annotations Summary -->
      <baw-site-recent-annotations [site]="site"></baw-site-recent-annotations>
    </ng-container>
  </div>
  <!-- Map using right column -->
  <div class="col-sm-6" style="min-height: 400px">
    <baw-map [markers]="marker"></baw-map>
  </div>
</div>
