<h1 class="mb-2">Annotation Search</h1>
<baw-annotation-search-form
  [project]="project"
  [region]="region"
  [site]="site"
  (modelChange)="updateModel($event)"
></baw-annotation-search-form>

<div class="mt-2">
  <a
    type="submit"
    class="btn btn-primary me-2"
    [strongRoute]="verifyAnnotationsRoute()"
    [queryParams]="model.toQueryParams()"
  >
    Verify This List
  </a>

  <a class="btn btn-secondary">Download Annotations</a>
</div>

<div class="preview-container">
  <hr />

  <ng-container *ngIf="audioEvents.length > 0; else noResultsTemplate">
    <div class="spectrogram-grid">
      @for (audioEvent of audioEvents; track $index) {
      <div class="preview-item border">
        <oe-spectrogram
          [id]="'spectrogram-' + audioEvent.id"
          [src]="buildAudioUrl(audioEvent)"
          window-size="1024"
          scaling="stretch"
          color-map="audacity"
        ></oe-spectrogram>
      </div>
      }
    </div>
  </ng-container>

  <div class="preview-controls my-2">
    <button
      type="button"
      class="btn btn-secondary me-2"
      [ngClass]="{ disabled: audioEvents.length === 0 }"
      (click)="pagePreviewPrevious()"
    >
      Previous Page
    </button>

    <button
      type="button"
      class="btn btn-secondary"
      [ngClass]="{ disabled: audioEvents.length === 0}"
      (click)="pagePreviewNext()"
    >
      Next Page
    </button>
  </div>

  <ng-template #noResultsTemplate>
    <h2>No {{ model.onlyUnverified ? "unverified" : "" }} annotations found</h2>
  </ng-template>
</div>
