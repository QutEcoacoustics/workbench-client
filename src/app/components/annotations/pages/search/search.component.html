<h1 class="mb-2">Annotation Search</h1>
<baw-annotation-search-form
  [project]="project"
  [region]="region"
  [site]="site"
  (modelChange)="updateModel($event)"
></baw-annotation-search-form>

<div class="mt-2">
  <a
    type="submit"
    class="btn btn-primary me-2"
    [strongRoute]="verifyAnnotationsRoute()"
    [queryParams]="model.toQueryParams()"
  >
    Verify This List
  </a>

  <a class="btn btn-secondary">Download Annotations</a>
</div>

<div class="preview-container">
  <hr />

  @if (audioEvents.length > 0) {
  <div class="spectrogram-grid">
    @for (audioEvent of audioEvents; track $index) {
    <div class="preview-item border">
      <oe-spectrogram
        [id]="'spectrogram-' + audioEvent.id"
        [src]="buildAudioUrl(audioEvent)"
        window-size="1024"
        scaling="stretch"
        color-map="audacity"
      ></oe-spectrogram>
    </div>
    }
  </div>
  } @else if (model.tagModels.length > 0) {
  <h2 id="no-results-error">
    No {{ model.onlyUnverified ? "unverified" : "" }} annotations found
  </h2>
  }

  <div class="preview-controls my-2">
    <button
      type="button"
      class="btn btn-secondary me-2"
      [disabled]="audioEvents.length === 0"
      (click)="pagePreviewPrevious()"
    >
      Previous Page
    </button>

    <button
      type="button"
      class="btn btn-secondary"
      [disabled]="audioEvents.length === 0"
      (click)="pagePreviewNext()"
    >
      Next Page
    </button>
  </div>
</div>
