<div *ngIf="!failure">
  <h1>
    <small class="text-muted"> Project: {{ project.name }} </small>
    <br />
    Harvest
  </h1>

  <baw-stepper [numSteps]="8" [activeStep]="stage"></baw-stepper>

  <div [ngSwitch]="stage">
    <div *ngSwitchCase="harvestStage.newHarvest">
      <baw-harvest-new
        (stage)="setStage($event)"
        (type)="setType($event)"
      ></baw-harvest-new>
    </div>

    <div *ngSwitchCase="harvestStage.uploading">
      <baw-harvest-stream-uploading
        *ngIf="isStreaming"
        (stage)="setStage($event)"
      ></baw-harvest-stream-uploading>

      <baw-harvest-batch-uploading
        *ngIf="!isStreaming"
        (stage)="setStage($event)"
      ></baw-harvest-batch-uploading>
    </div>

    <div *ngSwitchCase="harvestStage.scanning">
      <baw-harvest-scanning (stage)="setStage($event)"></baw-harvest-scanning>
    </div>

    <div *ngSwitchCase="harvestStage.metadataExtraction">
      <baw-harvest-metadata-extraction
        (stage)="setStage($event)"
      ></baw-harvest-metadata-extraction>
    </div>

    <div *ngSwitchCase="harvestStage.metadataReview">
      <baw-harvest-metadata-review
        (stage)="setStage($event)"
      ></baw-harvest-metadata-review>
    </div>

    <div *ngSwitchCase="harvestStage.processing">
      <baw-harvest-processing
        (stage)="setStage($event)"
      ></baw-harvest-processing>
    </div>

    <div *ngSwitchCase="harvestStage.review">
      <baw-harvest-review (stage)="setStage($event)"></baw-harvest-review>
    </div>

    <div *ngSwitchCase="harvestStage.complete">
      <baw-harvest-complete (stage)="setStage($event)"></baw-harvest-complete>
    </div>
  </div>
</div>
